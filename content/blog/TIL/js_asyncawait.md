---
title: "[JavaScript] async/await"
date: "2021-05-31"
tags: ["JavaScript", "async", "await"]
---
[ì´ì „ ê¸€](https://42kim.github.io/TIL/js_promise/)ì—ì„œ í”„ë¡œë¯¸ìŠ¤ì˜ í•œê³„ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ES8ì—ì„œ ë„ì…ëœ ê²ƒì´ ```async/await```ë¼ê³  í–ˆë‹¤.

async/awaitë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œë³´ë‹¤ ê°„ë‹¨í•˜ê³  ê°€ë…ì„± ì¢‹ê²Œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê³ , ë™ê¸° ì²˜ë¦¬ì²˜ëŸ¼ ë™ì‘í•˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.



### async/await ì‚¬ìš©ë²•

+ ```async```ëŠ” function ì•ì— ìœ„ì¹˜í•œë‹¤.   
  asyncê°€ ë¶™ì€ í•¨ìˆ˜ëŠ” **ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜**í•œë‹¤. í”„ë¡œë¯¸ìŠ¤ê°€ ì•„ë‹Œ ê°’ì„ ë°˜í™˜í•˜ë”ë¼ë„ ì•”ë¬µì ìœ¼ë¡œ resolved í”„ë¡œë¯¸ìŠ¤ë¡œ ê°ì‹¸ ë°˜í™˜í•œë‹¤.

+ ```await```ëŠ” **async í•¨ìˆ˜ ì•ˆì—ì„œë§Œ** ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  
  í”„ë¡œë¯¸ìŠ¤ ì•ì— awaitë¥¼ ë¶™ì´ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” í•´ë‹¹ í”„ë¡œë¯¸ìŠ¤ê°€ ì²˜ë¦¬ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤. ê·¸ë¦¬ê³  ì²˜ë¦¬ê°€ ì™„ë£Œë˜ë©´ resolve ê²°ê³¼ê°€ ë°˜í™˜ëœë‹¤.

+ ì˜ˆì‹œ

  ```javascript
  async function foo() {
      const a = await new Promise(resolve => setTimeout(() => resolve(1), 3000));
      const b = await new Promise(resolve => setTimeout(() => resolve(2), 2000));
      const c = await new Promise(resolve => setTimeout(() => resolve(3), 1000));
      
      console.log([a, b, c]);
  }
  
  foo();
  ```

  ì²« ë²ˆì§¸ í”„ë¡œë¯¸ìŠ¤ëŠ” 3ì´ˆê°€ íë¥¸ í›„ ë³€ìˆ˜ aì— 1ì„ í• ë‹¹í•œë‹¤.

  ì´ì–´ì„œ 2ì´ˆê°€ íë¥¸ í›„ ë³€ìˆ˜ bì— 2ë¥¼ í• ë‹¹í•˜ê³ ,

  ë‹¤ì‹œ 1ì´ˆê°€ íë¥¸ í›„ ë³€ìˆ˜ cì— 3ì„ í• ë‹¹í•˜ì—¬ ì•½ 6ì´ˆê°€ ì†Œìš”ëœë‹¤.

  ìœ„ì˜ ì˜ˆì‹œëŠ” 3ê°œì˜ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë™ê¸° ì²˜ë¦¬ì²˜ëŸ¼ ìˆ˜í–‰í•œë‹¤.

  ë§Œì•½ ì„œë¡œ ê´€ë ¨ì´ ì—†ì–´ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  í•„ìš”ê°€ ì—†ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë“¤ì€ ```Promise.all```ì„ ì‚¬ìš©í•˜ë ¤ ë¶ˆí•„ìš”í•œ ì†Œìš”ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤ [ğŸ‘‰Promise.all ì„¤ëª…](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)



### async/awaitì˜ ì—ëŸ¬ í•¸ë“¤ë§

ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì€ try..catchë¬¸ì„ ì‚¬ìš©í•´ ì—ëŸ¬ë¥¼ ìºì¹˜í•  ìˆ˜ ì—†ì—ˆë‹¤. ê·¸ëŸ¬ë‚˜ async í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ try..catchë¬¸ì„ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ë¥¼ ì •ìƒì ìœ¼ë¡œ ìºì¹˜í•  ìˆ˜ ìˆë‹¤.

ë§Œì•½ async í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ try..catchë¬¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ëŠ”ë° ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´, async í•¨ìˆ˜ëŠ” ì—ëŸ¬ë¥¼ rejectí•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤. ë”°ë¼ì„œ ì´ë¥¼ ì²˜ë¦¬í•´ì¤„ í”„ë¡œë¯¸ìŠ¤ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ ```.catch```ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—ëŸ¬ í•¸ë“¤ë§ì„ í•´ì£¼ë©´ ëœë‹¤.

```javascript
// async í•¨ìˆ˜ foo
foo().catch(console.error);
```



### ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ async í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°

ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” awaitë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ”ë°, ì–´ë–»ê²Œ í˜¸ì¶œëœ async í•¨ìˆ˜ì˜ ê²°ê³¼ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œ.

async í•¨ìˆ˜ê°€ ì–¸ì œë‚˜ **í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜**í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ê¸°ì–µí•˜ë©´ ëœë‹¤. ë”°ë¼ì„œ í”„ë¡œë¯¸ìŠ¤ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

```javascript
async function wait() {
  await new Promise(resolve => setTimeout(resolve, 1000));

  return 10;
}

function f() {
  // shows 10 after 1 second
  wait().then(result => alert(result));
}

f();
```



#### ì°¸ê³ 

[ëª¨ë˜ JavaScript íŠœí† ë¦¬ì–¼](https://ko.javascript.info/)  

[MDN Web Docs](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)  

ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive | ìœ„í‚¤ë¶ìŠ¤ | ì´ì›…ëª¨

